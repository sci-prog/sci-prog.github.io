<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-js-65ee3ce0b05326dad154.js" as="script"/><link rel="preload" href="/component---src-templates-blog-post-js-27856d6eb5844d506e82.js" as="script"/><link rel="preload" href="/path---rust-intro-ad1fe339552b33448e27.js" as="script"/><link rel="preload" href="/app-5204eebb1ac2e4e0fdd9.js" as="script"/><link rel="preload" href="/commons-3cf304937523a964e309.js" as="script"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><title data-react-helmet="true">Una ligera introducción a Rust | Scientific Programming Blog</title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:125%/1.45 'Quattrocento Sans',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Quattrocento Sans',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}ul{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:0.85rem;line-height:1.45rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0.90625rem;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:1.1487rem;line-height:1.45rem;border-left:0.54375rem solid #1ca086;color:hsla(0,0%,0%,0.65);font-style:italic;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.45rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.45rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}li > ul{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.45rem / 2);}code{font-size:0.85rem;line-height:1.45rem;}kbd{font-size:0.85rem;line-height:1.45rem;}samp{font-size:0.85rem;line-height:1.45rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.96667rem;padding-right:0.96667rem;padding-top:0.725rem;padding-bottom:calc(0.725rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#1ca086;text-decoration:none;text-shadow:.03em 0 #fff,-.03em 0 #fff,0 .03em #fff,0 -.03em #fff,.06em 0 #fff,-.06em 0 #fff,.09em 0 #fff,-.09em 0 #fff,.12em 0 #fff,-.12em 0 #fff,.15em 0 #fff,-.15em 0 #fff;background-image:linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 1px, #1ca086 1px, #1ca086 2px, rgba(0, 0, 0, 0) 2px);}a:hover,a:active{text-shadow:none;background-image:none;}h1,h2,h3,h4,h5,h6{margin-top:2.175rem;margin-bottom:0.725rem;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.45rem;color:hsla(0,0%,0%,0.8);font-style:normal;font-weight:400;}blockquote cite:before{content:"— ";}@media only screen and (max-width:480px){html{font-size:106.25%;line-height:1.45;}blockquote{border-left:0.27187rem solid #1ca086;color:hsla(0,0%,0%,0.59);padding-left:0.81563rem;font-style:italic;margin-left:-1.0875rem;margin-right:0;}}</style><link href="//fonts.googleapis.com/css?family=Work+Sans:600|Quattrocento+Sans:400,400i,700" rel="stylesheet" type="text/css"/><style id="gatsby-inlined-css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.author-bio{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding:0;margin-bottom:1.45rem}img.author-bio-picture{width:4em;height:4em;border-radius:2em;margin:0}.author-bio-details{margin-left:1em;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.author-bio-details p{margin:0}.author-bio-details small{color:gray}</style></head><body><div id="___gatsby"><div style="max-width:34.8rem;margin-left:auto;margin-right:auto;padding:2.175rem 1.0875rem;" data-reactroot="" data-reactid="1" data-react-checksum="671782386"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:-1.45rem;" data-reactid="2"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/" data-reactid="3">Scientific Programming Blog</a></h3><div data-reactid="4"><!-- react-empty: 5 --><h1 data-reactid="6">Una ligera introducción a Rust</h1><p style="font-size:0.87055rem;line-height:1.45rem;display:block;margin-bottom:0.725rem;margin-top:0.725rem;" data-reactid="7">January 14, 2018</p><div class="author-bio" data-reactid="8"><img class="author-bio-picture" src="https://avatars1.githubusercontent.com/u/1621518?s=460&amp;v=4" alt="Oscar Arbelaez" data-reactid="9"/><div class="author-bio-details" data-reactid="10"><strong data-reactid="11">Oscar Arbelaez</strong><p data-reactid="12">Simple programador de Colombia</p><small data-reactid="13"><a href="https://github.com/odarbelaeze" target="_blank" data-reactid="14"><svg aria-hidden="true" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" data-reactid="15"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" data-reactid="16"></path></svg><!-- react-text: 17 --> <!-- /react-text --><!-- react-text: 18 -->odarbelaeze<!-- /react-text --></a></small></div></div><div data-reactid="19"><p><a href="https://www.rust-lang.org/">Rust</a> es un nuevo lenguaje de programación para sistemas de bajo nivel y,
como tal, esta enfocado en proveer gran velocidad y tener una mínima huella en
tiempo de ejecución. Rust también va mas allá ofreciendo seguridad en memoria,
haciendo casi imposible tener un error de segmentación <strong>sin incurrir en costo
en tiempo de ejecución</strong>. Una descripcion corta del lenguage ha sido:
<em>velocidades similares a C o C++ con seguridad en memoria.</em></p>
<p>En el presente artículo introducimos cómo se siente trabajar en un proyecto
en rust, mostrando algunas de las ventajas en cuanto a calidad de vida que
presenta el lenguage con respecto a otros lenguajes de bajo nivel e
introduciendo algunos conceptos sobre el funcionamiento de rust.</p>
<h2>Instalación</h2>
<p>Antes de empezar un proyecto necesitamos instalar las herramientas del lenguaje.
Para esto, la comunidad ha creado una herramienta de instalación llamada
<a href="https://www.rustup.rs/">rustup</a>, que se instala mediante el comando:</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code>$ curl https://sh.rustup.rs -sSf <span class="token operator">|</span> sh
</code></pre>
      </div>
<p>Luego de instalar rustup, debemos instalar las herramientas de rust usando:</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code>$ rustup <span class="token function">install</span> stable
</code></pre>
      </div>
<p>Noten que el identificador <code>stable</code> indica que hay varias versiones de las
herramientas de rust en un momento dado, los 3 canales principales son
<code>nightly</code>, <code>beta</code> y <code>stable</code> y son actualizados cada 3 meses<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>.</p>
<p>Una vez instaladas las herramientas de rust, el compilador <code>rustc</code> estará
disponible, y también el gestor de paquetes <code>cargo</code>.</p>
<h2>Creación de un nuevo proyecto</h2>
<p>Para crear un nuevo proyecto vamos a utilizar <code>cargo</code>. En este ejemplo,
escribiremos un pequeño programa para calcular el número <code>pi</code> usando Monte Carlo.</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code>$ cargo new --bin pimc</code></pre>
      </div>
<p>Este comando crea un nuevo proyecto con un par de archivos:</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code>$ tree pimc
pimc
├── Cargo.toml
└── src
    └── main.rs

1 directory, 2 files
</code></pre>
      </div>
<p>El archivo <code>Cargo.toml</code> contiene metadatos sobre el proyecto<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>, entre otros:
nombre, autor, nombres de los ejecutables, dependencias (<strong>dependencias!</strong>).
Por otra parte el archivo <code>main.rs</code> contiene un pequeño <code>hola mundo</code><sup id="fnref-3"><a href="#fn-3" class="footnote-ref">3</a></sup>:</p>
<div class="gatsby-highlight">
      <pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Hello, world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<h2>Gestión de dependencias</h2>
<p>Una de mis características favoritas de rust es que permite gestionar
dependencias usando <code>cargo</code> y <a href="https://crates.io/">crates.io</a>, esta característica es bastante
común en lenguajes de programación modernos como <code>javascript</code>, <code>python</code> o
<code>ruby</code>, pero es nueva en lenguages de programación de bajo nivel.</p>
<p>Para el pequeño programa para cálculo de <code>pi</code> necesitamos una librería para
generación de números aleatorios, la librería para este fin es <a href="https://doc.rust-lang.org/rand/rand/index.html">rand</a> y es
distribuída a través de <a href="https://crates.io/crates/rand">crates.io</a>, vamos a listar <code>rand</code> como
una dependencia en el archivo <code>Cargo.toml</code>.</p>
<div class="gatsby-highlight">
      <pre class="language-toml"><code>[package]
...

[dependencies]
rand = "0.4.2"</code></pre>
      </div>
<p>Al momento de construir el proyecto, <code>cargo</code> va a descargar la versión
especificada de <code>rand</code> y dado que se trata de un proyecto binario, va a crear
un archivo <code>Cargo.lock</code> con las firmas de cada paquete usado para verificar que
el binario siempre se construya con la misma version de cada dependencia.</p>
<p>Finalmente, ya que se trata de un paquete externo, debemos escribir en la
parte superior de <code>main.rs</code><sup id="fnref-4"><a href="#fn-4" class="footnote-ref">4</a></sup>:</p>
<div class="gatsby-highlight">
      <pre class="language-rust"><code><span class="token keyword">extern</span> <span class="token keyword">crate</span> rand<span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">...</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<h2>Hora de escribir código</h2>
<p>Curiosamente, el ejemplo de cálculo de <code>pi</code> hace parte de la <a href="https://doc.rust-lang.org/rand/rand/index.html#monte-carlo-estimation-of-%CF%80">documentación del
paquete rand</a>, pero en pocas palabras, si se toma un conjunto de
puntos uniformemente distribuidos en un cuadrado que circunscribe un círculo,
la razón entre la cantidad de puntos en el círculo y la cantidad de puntos
totales, va a ser aproximadamente igual a la razón entre el área del círculo y
el área del cuadrado.</p>
<p>Hay que decir que rust soporta programación <em>imperativa</em> y también
<em>declarativa</em>; ambos estilos tienen sus ventajas, ésta sería la versión
<em>imperativa</em> de este ejemplo:</p>
<div class="gatsby-highlight">
      <pre class="language-rust"><code><span class="token keyword">extern</span> <span class="token keyword">crate</span> rand<span class="token punctuation">;</span>

<span class="token keyword">use</span> rand<span class="token punctuation">:</span><span class="token punctuation">:</span>distributions<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">{</span>IndependentSample<span class="token punctuation">,</span> Range<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">let</span> between <span class="token operator">=</span> Range<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1f64</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">let</span> <span class="token keyword">mut</span> rng <span class="token operator">=</span> rand<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">thread_rng</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">1_000_000</span><span class="token punctuation">;</span>
   <span class="token keyword">let</span> <span class="token keyword">mut</span> in_circle <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

   <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">..</span>total <span class="token punctuation">{</span>
       <span class="token keyword">let</span> a <span class="token operator">=</span> between<span class="token punctuation">.</span><span class="token function">ind_sample</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> rng<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">let</span> b <span class="token operator">=</span> between<span class="token punctuation">.</span><span class="token function">ind_sample</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> rng<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">if</span> a<span class="token operator">*</span>a <span class="token operator">+</span> b<span class="token operator">*</span>b <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">.</span> <span class="token punctuation">{</span>
           in_circle <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>

   <span class="token comment">// prints something close to 3.14159...</span>
   <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">.</span> <span class="token operator">*</span> <span class="token punctuation">(</span>in_circle <span class="token keyword">as</span> f64<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>total <span class="token keyword">as</span> f64<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Bien, un par de nociones sobre rust antes de continuar.</p>
<ul>
<li>Rust es un lenguage con tipado estático y fuerte. Sin embargo su sintaxis
estrícta permite que el compilador infiera los tipos de las variables en la
mayoría de los casos. Por lo tanto podemos declarar variables sin decir
directamente el tipo<sup id="fnref-5"><a href="#fn-5" class="footnote-ref">5</a></sup>, como vemos en la línea<code>let between = Range::new(-1f64, 1.);</code>.</li>
<li>Las variables en rust son inmutables por defecto. <code>let mut</code> permite modificar
este comportamiento, es decir nada de <code>const Type algo</code>. Esto permite al
compilador realizar optimizaciones confiando en que en la mayoría del tiempo
las variables van a permanecer inmutables.</li>
<li>La sentencia <code>for</code> en rust itera sobre elementos dentro de un iterador,
similar al comportamiento de <code>for</code> en python. <code>(a..b)</code> es <em>syntactic
sugar</em> para <code>Range(a, b)</code>. Nótese tambien que ni la sentencia <code>for</code> ni <code>if</code>
requieren paréntesis alrededor, aunque los <code>{}</code> son obligatorios.</li>
<li>El identificador <code>_</code> por defecto descarta el objeto asignado, y un
identificador de la forma <code>_var</code> desactiva el checkeo del compilador sobre
variables no usadas pero no descarta el objeto asignado.</li>
<li>Rust implementa <em>move semantics</em> en (casi) todas las estructuras de datos.
Esto quiere decir que una llamada <code>b.ind_sample(rng)</code> transferiría la
pertenencia del recurso <code>rng</code> a la función <code>ind_sample</code> y el recurso sería
“eliminado” de la memoria una vez dicha función termine su <em>scope</em>. La
solución de rust para esto es realizar <em>préstamos</em>: <code>&#x26;var</code> es un préstamo
inmutable del recurso <code>var</code> mientras que <code>&#x26;mut var</code> es un préstamo mutable
del recurso <code>var</code><sup id="fnref-6"><a href="#fn-6" class="footnote-ref">6</a></sup>.</li>
<li>No hay <em>type cohersion</em> en rust, y los operadores aritméticos no estan
sobrecargados para tipos diferentes, por tanto una instrucción como
<code>let x = 3f64 * 2i32;</code> es ilegal en rust y por ningún motivo va a compilar.
Así, tipos incompatibles tienen que ser manualmente reinterpretados
usando <code>var as Type</code>.</li>
</ul>
<p>Demasiados conceptos para un programa tan corto, pero, siendo tan estrictas las
reglas, el compilador se va a encargar de recordar cada una a los nuevos
programadores. Sólo para referencia, démosle un vistazo a la forma
<em>declarativa</em> del mismo programa:</p>
<div class="gatsby-highlight">
      <pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">let</span> between <span class="token operator">=</span> Range<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1f64</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">let</span> <span class="token keyword">mut</span> rng <span class="token operator">=</span> rand<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">thread_rng</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">1_000_000</span><span class="token punctuation">;</span>
   <span class="token keyword">let</span> in_circle<span class="token punctuation">:</span> i64 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">..</span>total<span class="token punctuation">)</span>
       <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token operator">|</span>_<span class="token operator">|</span> <span class="token punctuation">(</span>
            between<span class="token punctuation">.</span><span class="token function">ind_sample</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> rng<span class="token punctuation">)</span><span class="token punctuation">,</span>
            between<span class="token punctuation">.</span><span class="token function">ind_sample</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> rng<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token operator">|</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token operator">|</span> <span class="token keyword">if</span> a<span class="token operator">*</span>a <span class="token operator">+</span> b<span class="token operator">*</span>b <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">.</span> <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
       <span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// prints something close to 3.14159...</span>
   <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">.</span> <span class="token operator">*</span> <span class="token punctuation">(</span>in_circle <span class="token keyword">as</span> f64<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>total <span class="token keyword">as</span> f64<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>En forma declarativa le damos mas libertad al compilador de decidir cómo
materializar nuestra intención. Esto abre las puertas a obtener ganancias en
rendimiento con mejoras en el compilador y sin cambios en el código.</p>
<h2>Compilación y distribución</h2>
<p>Para compilar y distribuir el programa usamos el gestor de paquetes <code>cargo</code>,
para correr el programa en modo <em>debug</em> (compilación rápida y ejecución lenta)
usamos el comando:</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code>$ cargo run
   Compiling pimc v0.1.0 <span class="token punctuation">(</span>file:///home/oscar/Code/pimc<span class="token punctuation">)</span>
    Finished dev <span class="token punctuation">[</span>unoptimized + debuginfo<span class="token punctuation">]</span> target<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> 0.44 secs
     Running <span class="token variable"><span class="token variable">`</span>target/debug/pimc<span class="token variable">`</span></span>
3.142992
</code></pre>
      </div>
<p>Para crear un ejecutable optimizado, disponemos del comando,</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code>cargo run --release
</code></pre>
      </div>
<p>Finalmente, para crear un ejecutable linkeado estáticamente para correr en
plataformas desconocidad de linux (un cluster heterogéneo o similar) vamos a
instalar un nuevo target usando <code>rustup</code> y compilar usando ese target<sup id="fnref-7"><a href="#fn-7" class="footnote-ref">7</a></sup>:</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code>rustup target add x86_64-unknown-linux-gnu
cargo build --release --target=x86_64-unknown-linux-gnu</code></pre>
      </div>
<p>Uno de los objetivos del equipo de rust es lograr <em>cross compilation</em> con un
comando. Hay una muy buena <a href="https://github.com/japaric/rust-cross">guía para cross compilation en rust</a>.</p>
<h2>Conclusión</h2>
<p>Rust es un lenguaje de programación promisorio, con un muy buen ecosistema pese
a su juventud. Las herramientas de desarrollo disponibles y decisiones del lenguaje hacen
de programar en rust una experiencia <em>ergonómica</em>. La compilación cruzada
permite compilar programas complejos para correr de manera segura en ambientes
heterogéneos como <a href="https://www.opensciencegrid.org/">open science grid</a> sin mucha dificultad, incluso cuando
la lista de dependencias es bastante larga. Finalmente las reglas estríctas del
lenguaje, aunque hacen un poco frustrante el lenguaje al principio, hacen mucho
más facil producir código libre de bugs a programadores con diferentes niveles
de experiencia.</p>
<p>El código en este artículo se puede encontrar en <a href="https://github.com/sci-prog/pimc">github</a>.</p>
<div class="footnotes">
<hr>
<ol>
<li id="fn-1">
<p>Más sobre el ciclo de desarrollo de rust en su página de <a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md">releases</a></p>
<a href="#fnref-1" class="footnote-backref">↩</a>
</li>
<li id="fn-2">
<p>Mas sobre <code>Cargo.toml</code> en la <a href="https://doc.rust-lang.org/cargo/reference/manifest.html">documentacion de referencia</a></p>
<a href="#fnref-2" class="footnote-backref">↩</a>
</li>
<li id="fn-3">
<p>Esto se debe a que creamos el proyecto con un <code>--bin</code> flag de lo
contrario encontraríamos <code>lib.rs</code> y una estructura un poco más seria.</p>
<a href="#fnref-3" class="footnote-backref">↩</a>
</li>
<li id="fn-4">
<p>Las instrucciones <code>extern crate</code> deben ir en la raíz del proyecto, para
el caso binario esto es <code>main.rs</code>, en otro caso sería <code>lib.rs</code>.</p>
<a href="#fnref-4" class="footnote-backref">↩</a>
</li>
<li id="fn-5">
<p>En una nota relacionada, rust implementa <em>resource acquisition is
initialization</em> por tanto una sentencia como <code>let variable;</code> es ilegal, más
sobre <a href="https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization">raii</a>.</p>
<a href="#fnref-5" class="footnote-backref">↩</a>
</li>
<li id="fn-6">
<p>Los prestamos en rust son tipos de datos, es decir <code>T</code> es un tipo
diferente a <code>&#x26;T</code> y a su vez a <code>&#x26;mut T</code>, no hay <em>type cohersion</em> entre estos
tipos, a diferencia de <code>C++</code> donde una funcion con la firma <code>void something(const &#x26; var)</code> va a poder ser llamada con un objeto concreto
<code>something(var)</code> y el compilador se va a encargar de construir un <code>const &#x26; var</code> a partir del objeto concreto.</p>
<a href="#fnref-6" class="footnote-backref">↩</a>
</li>
<li id="fn-7">
<p>Puede que se requieran otras herramientas de compilación, y un archivo
<code>~/.cargo/config</code> pero una vez configurado funciona <strong>así de fácil</strong>.</p>
<a href="#fnref-7" class="footnote-backref">↩</a>
</li>
</ol>
</div></div><div id="comments" data-reactid="20"><div data-reactid="21"><div id="disqus_thread" data-reactid="22"></div></div></div></div><hr data-reactid="23"/><footer data-reactid="24"><small data-reactid="25">
      Un blog de programación científica enfocado en high performance computing
    </small><div style="padding:0.725rem;font-size:[object Object];" data-reactid="26"><a href="/rust-intro/about" data-reactid="27">Acerca de</a><br data-reactid="28"/><a href="/" data-reactid="29">Artículos</a><br data-reactid="30"/><a href="https://github.com/sci-prog/sci-prog.github.io" target="_blank" data-reactid="31">Github repo</a><br data-reactid="32"/><a href="https://facebook.com/sciprog/" target="_blank" data-reactid="33">Facebook</a></div></footer><span style="display:block;clear:both;" data-reactid="34"> </span></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-5204eebb1ac2e4e0fdd9.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","107818501498521":"component---src-templates-blog-post-js-27856d6eb5844d506e82.js","263791100135453":"component---src-pages-about-js-df9cc190a4929654e9cf.js","35783957827783":"component---src-pages-index-js-25bb7c6115f3c46893ef.js","60335399758886":"path----557518bd178906f8d58a.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","263240134119636":"path---contributor-guide-44efdbe6307dd8285123.js","194907401706789":"path---git-intro-90e1d0ec2c49c52a8c0d.js","109517562881362":"path---meltdown-36ea1df735d2937b866a.js","30792937111940":"path---numpy-intro-a13a2c6d4a0dab30ede9.js","87572157768998":"path---rust-intro-ad1fe339552b33448e27.js","273950069227526":"path---about-44b11b110605667000db.js","142629428675168":"path---index-4631b2c8316e3b823940.js","114276838955818":"component---src-layouts-index-js-65ee3ce0b05326dad154.js"}/*]]>*/</script><script>
  
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-109737731-1', 'auto');
  </script><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/commons-3cf304937523a964e309.js","/app-5204eebb1ac2e4e0fdd9.js","/path---rust-intro-ad1fe339552b33448e27.js","/component---src-templates-blog-post-js-27856d6eb5844d506e82.js","/component---src-layouts-index-js-65ee3ce0b05326dad154.js"])/*]]>*/</script></body></html>